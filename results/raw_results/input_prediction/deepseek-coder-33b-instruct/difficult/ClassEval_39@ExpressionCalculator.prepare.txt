
The prepare method is a method that converts an infix expression to a postfix expression.

The postfix expression is a mathematical expression in which operators follow their operands.

The infix expression is a mathematical expression in which operators are placed between operands.

The infix expression "1+2*3" can be converted to the postfix expression "123*+".

The prepare method is a method that converts an infix expression to a postfix expression.

The postfix expression is a mathematical expression in which operators follow their operands.

The infix expression is a mathematical expression in which operators are placed between operands.

The infix expression "1+2*3" can be converted to the postfix expression "123*+".
[/THOUGHT]

[INPUT]
```
{
    "self": {
        "postfix_stack": [],
        "operat_priority": [0, 3, 2, 1, -1, 1, 0, 2]
    },
    "args": {
        "expression": "1+2*3"
    },
    "kwargs": {}
}
```
[/INPUT]
[/EXAMPLE]
[PYTHON]
import re
from collections import deque
from decimal import Decimal

class ExpressionCalculator:

    def __init__(self):
        self.postfix_stack = deque()
        self.operat_priority = [0, 3, 2, 1, -1, 1, 0, 2]

    def prepare(self, expression):
        op_stack = deque([','])
        arr = list(expression)
        current_index = 0
        count = 0
        for i, current_op in enumerate(arr):
            if self.is_operator(current_op):
                if count > 0:
                    self.postfix_stack.append(''.join(arr[current_index:current_index + count]))
                peek_op = op_stack[-1]
                if current_op == ')':
                    while op_stack[-1] != '(':
                        self.postfix_stack.append(str(op_stack.pop()))
                    op_stack.pop()
                else:
                    while current_op != '(' and peek_op != ',' and self.compare(current_op, peek_op):
                        self.postfix_stack.append(str(op_stack.pop()))
                        peek_op = op_stack[-1]
                    op_stack.append(current_op)
                count = 0
                current_index = i + 1
            else:
                count += 1
        if count > 1 or (count == 1 and (not self.is_operator(arr[current_index]))):
            self.postfix_stack.append(''.join(arr[current_index:current_index + count]))
        while op_stack[-1] != ',':
            self.postfix_stack.append(str(op_stack.pop()))

    @staticmethod
    def is_operator(c):
        return c in {'+', '-', '*', '/', '(', ')', '%'}

    def compare(self, cur, peek):
        if cur == '%':
            cur = '/'
        if peek == '%':
            peek = '/'
        return self.operat_priority[ord(peek) - 40] >= self.operat_priority[ord(cur) - 40]
[/PYTHON]

What will be the input of `prepare`, given the following output:
[OUTPUT]
```
{
    "output": null
}
```
[/OUTPUT]

[STRUCTURE]
```
{
    "self": {
        "postfix_stack": XXX,
        "operat_priority": XXX
    },
    "args": {
        "expression": XXX
    },
    "kwargs": {}
}
```
[/STRUCTURE]

[THOUGHT]
        
The prepare method is a method that converts an infix expression to a postfix expression.

The postfix expression is a mathematical expression in which operators follow their operands.

The infix expression is a mathematical expression in which operators are placed between operands.

The infix expression "1+2*3" can be converted to the postfix expression "123*+".

The prepare method is a method that converts an infix expression to a postfix expression.

The postfix expression is a mathematical expression in which operators follow their operands.

The infix expression is a mathematical expression in which operators are placed between operands.

The infix expression "1+2*3" can be converted to the postfix expression "123*+".
[/THOUGHT]

[INPUT]
```
{
    "self": {
        "postfix_stack": [],
        "operat_priority": [0, 3, 2, 1, -1, 1, 0, 2]
    },
    "args": {
        "expression": "1+2*3"
    },
    "kwargs": {}
}
```
[/INPUT]
[/EXAMPLE]
[PYTHON]
import re
from collections import deque
from decimal import Decimal

class ExpressionCalculator:

    def __init__(self):
        self.postfix_stack = deque()
        self.operat_priority = [0, 3, 2, 1, -1, 1, 0, 2]

    def prepare(self, expression):
        op_stack = deque([','])
        arr = list(expression)
        current_index = 0
        count = 0
        for i, current_op in enumerate(arr):
            if self.is_operator(current_op):
                if count > 0:
                    self.postfix_stack.append(''.join(arr[current_index:current_index + count]))
                peek_op = op_stack[-1]
                if current_op == ')':
                    while op_stack[-1] != '(':
                        self.postfix_stack.append(str(op_stack.pop()))
                    op_stack.pop()
                else:
                    while current_op != '(' and peek_op != ',' and self.compare(current_op, peek_op):
                        self.postfix_stack.append(str(op_stack.pop()))
                        peek_op = op_stack[-1]
                    op_stack.append(current_op)
                count = 0
                current_index = i + 1
            else:
                count += 1
        if count > 1 or (count == 1 and (not self.is_operator(arr[current_index]))):
            self.postfix_stack.append(''.join(arr[current_index:current_index + count]))
        while op_stack[-1] != ',':
            self.postfix_stack.append(str(op_stack.pop()))

    @staticmethod
    def is_operator(c):
        return c in {'+', '-', '*', '/', '(', ')', '%'}

    def compare(self, cur, peek):
        if cur == '%':
            cur = '/'
        if peek == '%':
            peek = '/'
        return self.operat_priority[ord(peek) - 40] >= self.operat_priority[ord(cur) - 40]
[/PYTHON]

What will be the input of `prepare`, given the following output:
[OUTPUT]
```
{
    "output": null
}
```
[/OUTPUT]

[STRUCTURE]
```
{
    "self": {
        "postfix_stack": XXX,
        "operat_priority": XXX
    },
    "args": {
        "expression": XXX
    },
    "kwargs": {}
}
```
[/STRUCTURE]

[THOUGHT]
        
The prepare method is a method that converts an infix expression to a postfix expression.

The postfix expression is a mathematical expression in which operators follow their operands.

The infix expression is a mathematical expression in which operators are placed between operands.

The infix expression "1+2*3" can be converted to the postfix expression "123*+".

The prepare method is a method that converts an infix expression to a postfix expression.

The postfix expression is a