1. Inside `check_token`, it first checks if user and token are not None.
2. Then it splits the token into ts_b36 and _ (ignored).
3. It then checks if ts_b36 is a valid base36 number.
4. If ts_b36 is a valid base36 number, it converts it to an integer.
5. It then checks if the token is valid by comparing it with the token generated from the user and timestamp.
6. If the token is not valid, it checks if the token is valid by comparing it with the legacy token generated from the user and timestamp.
7. If the token is not valid, it returns False.
8. If the token is valid, it checks if the token is expired.
9. If the token is expired, it returns False.
10. If the token is not expired, it returns True.
[/THOUGHT]

[OUTPUT]
```
{
    "output": true
}
```
[/OUTPUT]
